<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>綜合</title>

	<script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
    <script src="http://code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
</head>
<style>

    body {
    font-family: 微軟正黑體;
    }

    h1{
    font-family: 微軟正黑體;
    }

    .release{
    padding: 10px;
    }

    .article{

     width: 600px;
     height: auto;
     background-color: #BDEBF2;
     margin: 10px; 
     padding: 5px;
     padding-bottom: 20px;

    }

</style>

<script src="http://localhost:200/socket.io/socket.io.js"></script>
<script>
$(function(){

socket = io.connect('http://localhost:200');

//載入舊文章
    socket.on('connect', function() {

        socket.emit('loadpaper'); 
    });


//秀出文章
    socket.on('showpaper',function(id, content, time) {

        var str = content;
            str = str.replace(/\n/g,"<br />");

        var inset  ='<div style="width: 600px; height: auto; background-color: #BDEBF2; margin: 10px; padding: 5px; padding-bottom: 20px; display:none;">作者：系統<br>'+str+'</div>';
    
        $(inset).prependTo('.show').fadeIn('slow');
   
    });



})
</script>


<body>

<div class="release">
    <label for="content">文章內容　</label><button type="button" id="create">發表</button><br>
    <textarea cols="45" rows="5" id="content"></textarea>
</div>

<div class="show">

</div>


</body>


<!-- client端 -->
<script>
$(function(){

    $('#create').click(function(){

    var content = $('#content').val();
    socket.emit('newpaper', content);
    })

})
</script>


</html>